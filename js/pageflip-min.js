var RocketPageFlip;RocketPageFlip=function(t,i){var e={current:0,navigation:!0,directionalNav:!0,prevText:"prev",nextText:"next"};this.rotating=!1,i=i||{},this.options=$.extend(e,i),this.el={main:$(t)},this.el.pages=this.el.main.find("> .page"),this.init()},RocketPageFlip.prototype.init=function(){this.isModernBrowser=this.supports("Transition")&&this.supports("Transform")&&this.supports("Perspective"),this.buildNavigation(),this.showCurrent()},RocketPageFlip.prototype.supports=function(t){var i=document.createElement("div"),e="Khtml Ms O Moz Webkit".split(" "),n=e.length;if(t in i.style)return!0;for(t=t.replace(/^[a-z]/,function(t){return t.toUpperCase()});n--;)if(e[n]+t in i.style)return!0;return!1},RocketPageFlip.prototype.buildNavigation=function(){var t=this,i,e,n,a;this.options.directionalNav&&(i=$("<a>").html(this.options.prevText).addClass("flip-directional flip-prev").attr("href","#").click(function(i){i.preventDefault(),t.rotating||t.prev()}),e=$("<a>").html(this.options.nextText).addClass("flip-directional flip-next").attr("href","#").click(function(i){i.preventDefault(),t.rotating||t.next()}),this.el.main.append(i,e)),this.options.navigation&&(n=$("<div>").addClass("flip-navigation"),a=0,this.el.pages.each(function(){n.append($("<a>").attr("href","#").data("page",a)),a++}),n.find("a").click(function(i){i.preventDefault(),t.rotating||t.flip($(this).data("page"))}),this.el.navigation=n,this.el.main.append(n))},RocketPageFlip.prototype.showCurrent=function(){var t=this;this.el.pages.hide().eq(this.options.current).show(),this.options.navigation&&t.el.navigation.find("a").removeClass("active").eq(this.options.current).addClass("active")},RocketPageFlip.prototype.flip=function(t){var i,e,n,a,s,o,r,p,l=this;if(prevPage=this.options.current,prevPage!==t){if(t>=this.el.pages.length&&(t=0),0>t&&(t=this.el.pages.length-1),this.options.current=t,!this.isModernBrowser)return void this.showCurrent();i=prevPage>t,i?(e=this.el.pages.eq(this.options.current),n=this.el.pages.eq(prevPage),s=$("<div>").addClass("half half-right").append(n.clone())):(n=this.el.pages.eq(this.options.current),e=this.el.pages.eq(prevPage),a=$("<div>").addClass("half half-left").append(e.clone())),r=$("<div>").addClass("side side-front").append(e.clone()),p=$("<div>").addClass("side side-back").append(n.clone()),o=$("<div>").addClass("flip-part").append(r,p),i&&o.addClass("flipped"),this.el.main.append(a,s,o),this.showCurrent(),setTimeout(function(){o.toggleClass("flipped")},50),this.rotating=!0,o.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(t){t.target===o.get(0)&&(l.rotating=!1,a&&a.remove(),s&&s.remove(),o.remove())})}},RocketPageFlip.prototype.next=function(){this.flip(this.options.current+1)},RocketPageFlip.prototype.prev=function(){this.flip(this.options.current-1)};