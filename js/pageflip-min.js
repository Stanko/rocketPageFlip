var RocketPageFlip;RocketPageFlip=function(t,e){var i={current:0,navigation:!0,directionalNav:!0,prevText:"prev",nextText:"next"};this.rotating=!1,e=e||{},this.options=$.extend(i,e),this.el={main:$(t)},this.el.pages=this.el.main.find("> .page"),this.init()},RocketPageFlip.prototype.init=function(){this.isModernBrowser=this.supports("Transition")&&this.supports("Transform")&&this.supports("Perspective"),this.buildNavigation(),this.showCurrent()},RocketPageFlip.prototype.supports=function(t){var e=document.createElement("div"),i="Khtml Ms O Moz Webkit".split(" "),n=i.length;if(t in e.style)return!0;for(t=t.replace(/^[a-z]/,function(t){return t.toUpperCase()});n--;)if(i[n]+t in e.style)return!0;return!1},RocketPageFlip.prototype.buildNavigation=function(){var t=this,e,i,n,a;this.options.directionalNav&&(e=$("<a>").html(this.options.prevText).addClass("flip-directional flip-prev").attr("href","#").click(function(e){e.preventDefault(),t.rotating||t.prev()}),i=$("<a>").html(this.options.nextText).addClass("flip-directional flip-next").attr("href","#").click(function(e){e.preventDefault(),t.rotating||t.next()}),this.el.main.append(e,i)),this.options.navigation&&(n=$("<div>").addClass("flip-navigation"),a=0,this.el.pages.each(function(){n.append($("<a>").attr("href","#").data("page",a)),a++}),n.find("a").click(function(e){e.preventDefault(),t.rotating||t.flip($(this).data("page"))}),this.el.navigation=n,this.el.main.append(n))},RocketPageFlip.prototype.showCurrent=function(){var t=this;this.el.pages.hide().eq(this.options.current).show(),this.options.navigation&&t.el.navigation.find("a").removeClass("active").eq(this.options.current).addClass("active")},RocketPageFlip.prototype.flip=function(t){var e,i,n,a,s,o,r,p,l,d,h=this;if(prevPage=this.options.current,prevPage!==t){if(t>=this.el.pages.length&&(t=0),0>t&&(t=this.el.pages.length-1),this.options.current=t,!this.isModernBrowser)return void this.showCurrent();e=prevPage>t,l=$("<div>").addClass("dark-overlay"),d=$("<div>").addClass("dark-overlay page-overlay darken"),i=this.el.pages.eq(this.options.current),n=this.el.pages.eq(prevPage),r=$("<div>").addClass("side side-front").append(i.clone()),p=$("<div>").addClass("side side-back").append(n.clone()),e?s=$("<div>").addClass("half half-right").append(n.clone(),l):a=$("<div>").addClass("half half-left").append(n.clone(),l),o=$("<div>").addClass("flip-part").append(r,p),o.addClass(e?"flipped":"flip-reverse"),this.el.main.append(a,s,o,d),this.showCurrent(),setTimeout(function(){o.toggleClass("flipped"),l.addClass("darken"),d.removeClass("darken")},50),this.rotating=!0,o.on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd",function(t){t.target===o.get(0)&&(h.rotating=!1,l.remove(),d.remove(),a&&a.remove(),s&&s.remove(),o.remove())})}},RocketPageFlip.prototype.next=function(){this.flip(this.options.current+1)},RocketPageFlip.prototype.prev=function(){this.flip(this.options.current-1)};